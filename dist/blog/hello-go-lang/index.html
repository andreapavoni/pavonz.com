<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pavonz.com</title>
    <link rel="stylesheet" href="https://pavonz.com/app.css" />
  </head>
  <body>
    <header class="root">
      <section class="container">
        <nav>
          <ul>
            <li><a href="/">home</a></li>
            <li><a href="/blog">blog</a></li>
          </ul>
        </nav>
        <h1><a href="/">~/pavonz</a></h1>
      </section>
    </header>

    <main class="container">
<h1 class="title">Hello Go lang!</h1>
<p class="subtitle"><strong>2013-05-03</strong></p>
<h3 id="tl-dr">TL;DR</h3>
<p>I decided to try Go and I developed a simple web app. There's a <a href="http://goshort.herokuapp.com">working demo on heroku</a> and source code is available on <a href="https://github.com/andreapavoni/goshort">github</a>. It was an awesome journey and I'm planning to go further.</p>
<h3 id="beyond-hello-world">Beyond Hello World</h3>
<p>You know, when you learn a new programming language, <em>Hello World</em> is not enough, you always need some known problem to solve, but <em>known problem</em> doesn't mean a boring non-practical algorithm. I decided to port <a href="https://github.com/andreapavoni/avarus">avarus</a>, a simple Url shortener built with <a href="http://cuba.is">Cuba</a> ruby microframework and <a href="http://redis.io">Redis</a>. It is a web application, it uses a database and it took a very low amount of code (~150/200 loc). So it's a good candidate to port in Go.</p>
<h3 id="first-steps">First steps</h3>
<p>Until few days ago, I've never used Go, I'd just read a lot of blog posts and some wiki page. I've read <a href="http://golang.org/doc/install">Getting Started</a> (but I've used homebrew) and followed the first pages of <a href="http://tour.golang.org/">A Tour of Go</a>, then I launched the editor to get my hands on. I premise that, during the years, I've used a lot of programming languages, so maybe I'm a bit biased, however Go looked very clean and familiar, especially if you've used C/C++.
My first impressions were quite positive, Go has an awesome set of easy and portable tools: you install Go and you get all you need to work.</p>
<h3 id="from-ruby-to-go">From Ruby to Go</h3>
<p>I was wondering how much effort should be needed to write the same program from Ruby to Go. They are different for many reasons, so I was expecting a big gap in the lines of code and a steep learning curve. I was wrong, it only took 2 hours to get a working prototype, then I've dedicated some day trying to refine the code to reach a decent implementation. The final result took ~200/250 lines of code, it's an excellent result, considering that Go is a <em>low level</em> language, especially when compared to Ruby.</p>
<h3 id="libraries-and-support">Libraries and support</h3>
<p>I've found that Go has a lot of <em>packages</em> bundled with its standard library (plus the ones provided by the community) and it was quite easy to find answers, most of them on the <a href="https://groups.google.com/forum/?fromgroups#!forum/golang-nuts">Go mail list</a>) to solve problems related to some weirdness in code organization.
At the beginning, I've used <a href="http://golang.org/pkg/net/http/">net/http</a> package to write the web server part but, you know, nobody would use a so low level library for this task. So I chose <a href="https://github.com/hoisie/web">web.go</a>, a micro web framework very similar to Sinatra and Cuba minimalistic approach. If you're looking to something more MVC-like, you should look at <a href="https://github.com/astaxie/beego">beego</a>, it has excellent features (eg: it handles JSON).</p>
<h3 id="one-tool-to-rule-them-all">One tool to rule them all</h3>
<p>I said that the Go toolchain is easy to use, the <code>go</code> command, does almost everything:</p>
<ul>
<li>run a program (compiles it temporarily): <code>go run myfile.go</code></li>
<li>build (compile to a binary): <code>go build</code></li>
<li>test <code>go test</code></li>
<li>compile and install a remote package: <code>go get url.to/package_name</code></li>
</ul>
<p>I'm almost sure there are other available commands, I've just listed the bare minimum ones. Moreover, the compiler warns you about syntax errors, unused packages and variables and the resulted binary is ready for use <em>as is</em>. Isn't it cool?</p>
<h3 id="troubles">Troubles?</h3>
<p>During this amazing jouney, the hardest problems where:</p>
<ul>
<li>
<p>File organization and namespaces: you can use subdirectories for namespacing, but they become internal <em>packages</em> and you need to follow some rules and conventions to keep your app working. The only offical guideline is <a href="http://golang.org/doc/code.html">How to write Go code</a>, but it offers a very basic overview on code organization.</p>
</li>
<li>
<p>Sometimes, you get <em>unclear errors</em> from the compiler, most of them due to some access to null pointers or errors in language syntax (eg: using control stuctures outside a function block).</p>
</li>
<li>
<p>I wasn't able to write decent tests, I tried for a bit, then I've <em>delayed</em> the idea for later. Maybe I need some more nowledge (and snippets) to get an idea. All I know, is that you need to put the file names with a <code>_test.go</code> suffix inside the same directory.</p>
</li>
</ul>
<p>As you can see, they're trivial, perhaps caused from the fact that I'm a Go newbie :P</p>
<h3 id="deploy">Deploy</h3>
<p>Before deciding to pick Go, I've quickly investigated about deploying the app. I've found some article about deploying on heroku, so I've started to write my app without reading them. Again, I was wondering about the needed effort to deploy a Go app and, again, I was quite surprised. I've followed <a href="http://mmcgrana.github.io/2012/09/getting-started-with-go-on-heroku.html">this tutorial</a> and everything worked flawlessy: heroku compiles your code to a binary, then runs it through Procfile. Almost the same would happen on a custom VPS box, once you have a working Go installation.</p>
<h3 id="final-thoughts">Final thoughts</h3>
<p>It was an awesome journey, Go is a very interesting language and I think it might be used for other projects. I'm planning to go further, trying to build some other pet project. As you can see, I didn't mention about Go's main strenghts (eg: concurrency), you can find thousands of articles and discussions about this. Instead, I focused on telling my story on <em>what happens when you try to learn Go and build a simple web app</em>. A lot of people is adopting (or going to adopt) NodeJs for several (almost good) reasons, if you're one of these, give Go a try ;-)</p>
 </main>
    <footer class="root">
      <section class="container">
        <small
          >built with <i class="hearth">&#10084;</i> by Andrea
          <i>pavonz</i> Pavoni &copy;2010-2022</small
        >
      </section>
    </footer>
    <script
      data-goatcounter="https://pavonz.goatcounter.com/count"
      async
      src="//gc.zgo.at/count.js"
    ></script>
  </body>
</html>
